<!DOCTYPE html>
<!--
  File: index.html
  Project: Cloud Cost Intelligence Platform
  Author: Ishan (Frontend Lead)
  Created: January 2026
  Description: Main dashboard page. Displays cost visualizations, provider
               breakdown, usage trends, and client filtering controls.
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cloud Cost Intelligence Platform</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Component 8: NavigationBar -->
    <nav class="navbar">
        <div class="navbar-brand">
            <h1>Cloud Cost Intelligence</h1>
        </div>
        <ul class="navbar-menu">
            <li><a href="#dashboard" class="nav-link active" data-page="dashboard">Dashboard</a></li>
            <li><a href="#waste-alerts" class="nav-link" data-page="waste">Waste Alerts</a></li>
            <li><a href="#recommendations" class="nav-link" data-page="recommendations">Recommendations</a></li>
            <li><a href="#settings" class="nav-link" data-page="settings">Settings</a></li>
        </ul>
        <button id="filter-toggle" class="filter-toggle-btn">
            âš™ Filters <span id="active-filter-count" class="filter-count hidden">0</span>
        </button>
        <div class="navbar-client">
            <label for="client-filter">Client</label>
            <select id="client-filter" class="filter-select">
                <option value="">All Clients</option>
            </select>
        </div>
    </nav>

    <!-- Global Filter Drawer (persists across all pages) -->
    <div id="filter-drawer" class="filter-drawer hidden">
        <div class="filter-drawer-inner">
            <div class="filter-group">
                <label>Date Range</label>
                <select id="date-range-selector" class="filter-select">
                    <option value="7">Last 7 Days</option>
                    <option value="30" selected>Last 30 Days</option>
                    <option value="60">Last 60 Days</option>
                    <option value="90">Last 90 Days</option>
                </select>
            </div>
            <div class="drawer-separator"></div>
            <div class="filter-group">
                <label>Provider</label>
                <select id="provider-filter" class="filter-select">
                    <option value="">All Providers</option>
                    <option value="2001">AWS</option>
                    <option value="2002">Azure</option>
                    <option value="2003">GCP</option>
                </select>
            </div>
            <div class="filter-group">
                <label>Service Type</label>
                <select id="service-filter" class="filter-select">
                    <option value="">All Services</option>
                </select>
            </div>
            <div class="filter-actions">
                <button id="apply-filters" class="btn-primary">Apply</button>
                <button id="clear-filters" class="btn-secondary">Clear</button>
            </div>
        </div>
    </div>

    <!-- Component 9: ErrorDisplay (hidden by default) -->
    <div id="error-display" class="error-display hidden">
        <div class="error-content">
            <span class="error-message"></span>
            <div class="error-actions">
                <button class="btn-retry">Retry</button>
                <button class="btn-dismiss">Dismiss</button>
            </div>
        </div>
    </div>

    <main class="container">
        <!-- Component 1: DashboardView -->
        <section id="dashboard-view" class="page active">
            <div class="dashboard-header">
                <h2>Cost Overview</h2>
                <div class="dashboard-controls">
                    <button id="refresh-button" class="btn-refresh">â†» Refresh</button>
                </div>
            </div>

            <!-- Cost Summary Cards -->
            <div class="cost-summary-cards">
                <div class="summary-card">
                    <h3>Total Spend</h3>
                    <p class="cost-value" id="total-cost">$0.00</p>
                    <span class="cost-period">Last 30 days</span>
                </div>
                <div class="summary-card aws">
                    <h3>AWS Costs</h3>
                    <p class="cost-value" id="aws-cost">$0.00</p>
                    <span class="cost-period">Last 30 days</span>
                </div>
                <div class="summary-card azure">
                    <h3>Azure Costs</h3>
                    <p class="cost-value" id="azure-cost">$0.00</p>
                    <span class="cost-period">Last 30 days</span>
                </div>
                <div class="summary-card gcp">
                    <h3>GCP Costs</h3>
                    <p class="cost-value" id="gcp-cost">$0.00</p>
                    <span class="cost-period">Last 30 days</span>
                </div>
                <div class="summary-card">
                    <h3>Potential Savings</h3>
                    <p class="cost-value savings" id="potential-savings">$0.00</p>
                    <span class="cost-period">Estimated monthly</span>
                </div>
            </div>

            <!-- Component 10: Resource Metrics (FR-08) -->
            <div class="resource-metrics">
                <h3>Resource Metrics</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <span class="metric-label">Avg Daily Cost</span>
                        <span class="metric-value" id="avg-daily-cost">$0.00</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">Max Daily Cost</span>
                        <span class="metric-value" id="max-daily-cost">$0.00</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">Active Services</span>
                        <span class="metric-value" id="active-services">0</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">Avg Cost / Service</span>
                        <span class="metric-value" id="avg-cost-per-service">$0.00</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">Total Units Used</span>
                        <span class="metric-value" id="total-units-used">0</span>
                    </div>
                    <div class="metric-card">
                        <span class="metric-label">Avg Units / Day</span>
                        <span class="metric-value" id="avg-units-per-day">0</span>
                    </div>
                </div>
            </div>

            <!-- Component 2: TrendChart -->
            <div class="chart-container">
                <h3>Spending Trends</h3>
                <canvas id="trend-chart"></canvas>
            </div>
        </section>

        <!-- Component 4: WasteAlertsList (FR-04) -->
        <section id="waste-alerts-view" class="page">
            <div class="waste-header">
                <div>
                    <h2>Waste Alerts</h2>
                    <p class="page-description">Money on the table â€” resources with low utilization or optimization opportunities</p>
                </div>
            </div>

            <!-- Waste Summary Banner -->
            <div id="waste-summary-banner" class="waste-summary-banner">
                <div class="waste-banner-item">
                    <span class="waste-banner-label">Monthly Spend</span>
                    <span class="waste-banner-value" id="waste-monthly-spend">$0</span>
                </div>
                <div class="waste-banner-divider"></div>
                <div class="waste-banner-item">
                    <span class="waste-banner-label">Recoverable Waste</span>
                    <span class="waste-banner-value waste-banner-savings" id="waste-total-savings">$0/mo</span>
                </div>
                <div class="waste-banner-divider"></div>
                <div class="waste-banner-item">
                    <span class="waste-banner-label">Budget Target</span>
                    <span class="waste-banner-value" id="waste-budget-target">$0</span>
                </div>
                <div class="waste-banner-divider"></div>
                <div class="waste-banner-item">
                    <span class="waste-banner-label">Over Budget</span>
                    <span class="waste-banner-value waste-banner-danger" id="waste-over-budget">$0</span>
                </div>
            </div>

            <!-- Severity Summary Cards -->
            <div class="waste-severity-cards" id="waste-severity-cards">
                <div class="severity-card severity-critical">
                    <span class="severity-dot dot-critical"></span>
                    <span class="severity-count" id="waste-critical-count">0</span>
                    <span class="severity-label">Critical</span>
                </div>
                <div class="severity-card severity-warning">
                    <span class="severity-dot dot-warning"></span>
                    <span class="severity-count" id="waste-warning-count">0</span>
                    <span class="severity-label">Warning</span>
                </div>
                <div class="severity-card severity-info">
                    <span class="severity-dot dot-info"></span>
                    <span class="severity-count" id="waste-info-count">0</span>
                    <span class="severity-label">Optimized</span>
                </div>
            </div>

            <!-- Provider Concentration -->
            <div id="waste-provider-concentration" class="waste-concentration hidden">
                <span class="concentration-icon">âš </span>
                <span class="concentration-text" id="waste-concentration-text"></span>
            </div>

            <!-- Alerts Table -->
            <div class="alerts-container">
                <table class="alerts-table">
                    <thead>
                        <tr>
                            <th>Severity</th>
                            <th class="sortable" data-sort="service_name">
                                Service <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="provider_name">
                                Provider <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="utilization">
                                Utilization <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="monthly_cost">
                                Monthly Cost <span class="sort-indicator"></span>
                            </th>
                            <th class="sortable" data-sort="potential_savings">
                                Potential Savings <span class="sort-indicator"></span>
                            </th>
                            <th>Trend</th>
                            <th>Alt Provider</th>
                        </tr>
                    </thead>
                    <tbody id="waste-alerts-body">
                        <tr>
                            <td colspan="8" class="loading">Loading waste alerts...</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- Category Breakdown -->
            <div id="waste-category-breakdown" class="waste-category-section">
                <h3>Spend by Category</h3>
                <div id="waste-category-bars" class="category-bars"></div>
            </div>
        </section>

        <!-- Component 5: RecommendationsPanel (FR-05) -->
        <section id="recommendations-view" class="page">
            <div class="rec-header">
                <div>
                    <h2>Optimization Recommendations</h2>
                    <p class="page-description">Savings Roadmap â€” phased plan to reduce cloud spending with cost-benefit analysis</p>
                </div>
            </div>

            <!-- Savings Banner -->
            <div id="rec-savings-banner" class="rec-savings-banner">
                <div class="rec-banner-item">
                    <span class="rec-banner-label">Current Spend</span>
                    <span class="rec-banner-value" id="rec-current-spend">$0/mo</span>
                </div>
                <div class="rec-banner-arrow">â†’</div>
                <div class="rec-banner-item">
                    <span class="rec-banner-label">Budget</span>
                    <span class="rec-banner-value" id="rec-budget">$0/mo</span>
                </div>
                <div class="rec-banner-arrow">â†’</div>
                <div class="rec-banner-item">
                    <span class="rec-banner-label">Optimized Spend</span>
                    <span class="rec-banner-value rec-banner-target" id="rec-target-spend">$0/mo</span>
                </div>
                <div class="rec-banner-arrow">â†’</div>
                <div class="rec-banner-item">
                    <span class="rec-banner-label">Total Recoverable</span>
                    <span class="rec-banner-value rec-banner-savings" id="rec-total-savings">$0/mo</span>
                </div>
            </div>
            <!-- Optimization vs Budget Bar -->
            <div id="rec-budget-bar" class="rec-budget-bar">
                <div class="rec-bar-track">
                    <div class="rec-bar-fill" id="rec-bar-fill"></div>
                    <div class="rec-marker rec-marker-optimized" id="rec-marker-optimized">
                        <span class="rec-marker-flag rec-flag-optimized">
                            <span class="rec-flag-label">Optimized</span>
                            <span class="rec-flag-value" id="rec-marker-optimized-val"></span>
                        </span>
                    </div>
                    <div class="rec-marker rec-marker-budget" id="rec-marker-budget">
                        <span class="rec-marker-flag rec-flag-budget">
                            <span class="rec-flag-label">Budget</span>
                            <span class="rec-flag-value" id="rec-marker-budget-val"></span>
                        </span>
                    </div>
                    <div class="rec-marker rec-marker-current" id="rec-marker-current">
                        <span class="rec-marker-flag rec-flag-current">
                            <span class="rec-flag-label">Current</span>
                            <span class="rec-flag-value" id="rec-marker-current-val"></span>
                        </span>
                    </div>
                </div>
                <div class="rec-bar-scale" id="rec-bar-scale"></div>
                <div class="rec-bar-summary" id="rec-bar-summary"></div>
            </div>

            <!-- Phase Summary Cards -->
            <div id="rec-phase-cards" class="rec-phase-cards">
                <!-- Populated by JS -->
            </div>

            <!-- Phase Detail Sections -->
            <div id="rec-phases-detail" class="rec-phases-detail">
                <!-- Populated by JS -->
            </div>

            <!-- Summary Comparison Table -->
            <div id="rec-summary-table" class="rec-summary-section">
                <h3>Phase Comparison</h3>
                <table class="rec-comparison-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>Phase 1: Now</th>
                            <th>Phase 2: 30 Days</th>
                            <th>Phase 3: 90 Days</th>
                        </tr>
                    </thead>
                    <tbody id="rec-comparison-body">
                        <tr><td colspan="4" class="loading">Loading...</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- Bottom Line -->
            <div id="rec-bottom-line" class="rec-bottom-line hidden">
                <span class="rec-bottom-icon">ðŸ’¡</span>
                <span id="rec-bottom-text" class="rec-bottom-text"></span>
            </div>
        </section>

        <!-- Component 6: BudgetSettings -->
        <section id="settings-view" class="page">
            <h2>Budget Settings</h2>
            <p class="page-description">Configure spending limits and alert thresholds</p>
            
            <div class="settings-form">
                <div class="form-group">
                    <label for="budget-amount">Monthly Budget ($)</label>
                    <input type="number" id="budget-amount" class="form-control" placeholder="Loading..." step="0.01">
                </div>
                
                <div class="form-group">
                    <label for="monthly-limit">Monthly Limit ($)</label>
                    <input type="number" id="monthly-limit" class="form-control" placeholder="Loading..." step="0.01">
                </div>
                
                <div class="form-group">
                    <label for="alert-threshold">Alert Threshold (%)</label>
                    <input type="range" id="alert-threshold" class="slider" min="50" max="100" value="80" step="5">
                    <span id="threshold-value" class="threshold-display">80%</span>
                    <p class="help-text">Alert when spending reaches this percentage of budget</p>
                </div>
                
                <div class="form-group checkbox-group">
                    <label>
                        <input type="checkbox" id="enable-alerts" checked>
                        Enable Budget Alerts
                    </label>
                </div>
                
                <div class="form-actions">
                    <button id="save-settings" class="btn-primary">Save Settings</button>
                    <button id="cancel-settings" class="btn-secondary">Cancel</button>
                </div>
            </div>

            <!-- Component 7: ExportModule -->
            <div class="export-section">
                <h3>Export Reports</h3>
                <div class="export-controls">
                    <div class="export-buttons">
                        <button id="export-csv" class="btn-export">ðŸ“Š Cost Analysis Report (CSV)</button>
                        <button id="export-pdf" class="btn-export">ðŸ“„ Invoice (PDF)</button>
                    </div>
                </div>
                <div id="export-progress" class="export-progress hidden">
                    <div class="progress-bar">
                        <div class="progress-fill"></div>
                    </div>
                    <span class="progress-text">Preparing export...</span>
                </div>
            </div>
        </section>
    </main>

    <footer class="footer">
        <p>&copy; 2026 The Code Collective | CMSC 495 Capstone Project</p>
    </footer>

    <!-- Load JavaScript files in order (non-module version for direct file opening) -->
    <!-- jsPDF libraries for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/analysis.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>